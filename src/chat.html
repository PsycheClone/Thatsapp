<template>
  <require from="bootstrap/css/bootstrap.css"></require>
  <require from="./message"></require>
  <require from="./user"></require>

  <div show.bind="nameSet" class="container-fluid">
    <div class="row">
      <div class="col-md-2" style="height: 300px;">
        <div class="list-group">
          <h2>${user.nickname}</h2>
          <button click.delegate="logout()">logout</button>
          <user repeat.for="user of users" user.bind="user"></user>
        </div>
      </div>
      <div show.bind="nameSet" class="container col-md-10">
        <div class="row" style="height: 100vh;">
          <div class="col">
            <div id="chat-container" class="bg-success d-flex flex-column" style="overflow: scroll; height: calc(100vh - 70px); padding: 10px;">
              <div class="mt-auto">
                <div class="row" repeat.for="message of messages">
                  <div if.bind="message.otheruser" class="col"></div>
                  <message if.bind="message.otheruser" class="col" message.bind="message"></message>
                  <!--separate-->
                  <message if.bind="!message.otheruser" class="col" message.bind="message"></message>
                  <div if.bind="!message.otheruser" class="col"></div>
                </div>
              </div>
            </div>
              <form submit.delegate="sendMessage()">
                <div class="w-100 justify-content-md-center">
                  <div class="input-group" style="height: 70px;">
                    <input name="message" type="text" value.bind="message" class="form-control text-left"
                           placeholder="type here">
                    <span class="input-group-btn">
                    <button class="btn btn-success" type="submit">Send</button>
                  </span>
                  </div>
                </div>
              </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
